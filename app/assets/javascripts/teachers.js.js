// Generated by CoffeeScript 1.8.0
var getCounties, teachersInfoReady;

teachersInfoReady = function() {
  var bestPictures, counties, countyList, dropzone;
  $('#qualification_present').on('click', function() {
    if ($("#qualification_endDate").css('opacity') === '1') {
      $('#qualification_endDate').animate({
        opacity: .1
      });
      return $('#qualification_endDate').children().prop({
        disabled: true
      });
    } else {
      $('#qualification_endDate').animate({
        opacity: 1
      });
      return $('#qualification_endDate').children().prop({
        disabled: false
      });
    }
  });
  $('#qual_left').css('height', $('#qual_form').height());
  if ($('#dropzone').length > 0) {
    dropzone = new Dropzone('#dropzone', {
      paramName: "photo[avatar]",
      addRemoveLinks: true,
      parallelUploads: 10,
      thumbnailWidth: 274,
      thumbnailHeight: 180,
      autoProcessQueue: false
    });
    dropzone.on('error', function(file) {
      return $('body').prepend("<b style='color: red;'>An error occurred while saving the Student.</b>");
    });
    dropzone.on('sending', function(file, xhr, formData) {
      return formData.append('profile', 'true');
    });
    dropzone.on('success', function(file) {
      console.log('File uploaded successfully');
      return location.reload();
    });
    $('#process_queue').on('click', function() {
      return dropzone.processQueue();
    });
    $('.profile_pic_popover').popover();
    $('.popover-dismiss').popover({
      trigger: 'focus'
    });
  }
  $('#visible_check').on('click', function() {
    if ($('#endDate').css('opacity') === '1') {
      return $('#endDate').animate({
        opacity: .1
      });
    } else {
      return $('#endDate').animate({
        opacity: 1
      });
    }
  });
  if ($('.typeahead.subject').length > 0) {
    bestPictures = new Bloodhound({
      datumTokenizer: Bloodhound.tokenizers.obj.whitespace("name"),
      queryTokenizer: Bloodhound.tokenizers.whitespace,
      prefetch: "/subject-search"
    });
    bestPictures.initialize();
    $(".typeahead.subject").typeahead({
      hint: true,
      highlight: true,
      minLength: 2
    }, {
      name: "Subjects",
      displayKey: "name",
      source: bestPictures.ttAdapter()
    });
  }
  if ($('.typeahead.county').length > 0) {
    countyList = getCounties();
    counties = new Bloodhound({
      datumTokenizer: Bloodhound.tokenizers.obj.whitespace("value"),
      queryTokenizer: Bloodhound.tokenizers.whitespace,
      local: $.map(getCounties(), function(county) {
        return {
          value: county
        };
      })
    });
    counties.initialize();
    $(".typeahead.county").typeahead({
      hint: true,
      highlight: true,
      minLength: 1
    }, {
      name: "counties",
      displayKey: "value",
      source: counties.ttAdapter()
    });
  }
  $(document).on('change', '.form-control.distance_rate', function() {
    return $('#main_subject_search').submit();
  });
  $('#subject_search').keyup(function() {
    return $.get($('#subject_search').attr('action'), $('#subject_search').serialize(), null, 'script');
  });
  $('#teachers_subjects_modal').on('shown.bs.modal', function() {
    return document.getElementById('teachers_search_input').focus();
  });
  if ($('.search_results_row').length > 0) {
    $('.search_results_row').mouseover(function() {
      $('.image_container').css('color', 'black');
      $(this).find('.search_results_teachers_name').animate({
        color: '#509BE6'
      }, 50);
      $('.image_container').css('text-decoration', 'none');
      return $(this).find('.results_photos.back').animate({
        opacity: .5
      }, 50);
    });
    return $('.search_results_row').mouseleave(function() {
      $('.image_container').css('color', 'black');
      $(this).find('.search_results_teachers_name').animate({
        color: 'black'
      }, 50);
      return $(this).find('.results_photos.back').animate({
        opacity: 0
      }, 50);
    });
  }
};

$(document).on('change', '#Multiple', function() {
  return $('#no_of_weeks').animate({
    height: 'toggle'
  }, 100);
});

$(document).ready(teachersInfoReady);

$(document).on('page:load', teachersInfoReady);

getCounties = function() {
  return ['Antrim', 'Armagh', 'Carlow', 'Cavan', 'Clare', 'Cork', 'Derry', 'Donegal', 'Down', 'Dublin', 'Fermanagh', 'Galway', 'Kerry', 'Kildare', 'Kilkenny', 'Laois', 'Leitrim', 'Limerick', 'Longford', 'Louth', 'Mayo', 'Meath', 'Monaghan', 'Offaly', 'Roscommon', 'Sligo', 'Tipperary', 'Tyrone', 'Waterford', 'Westmeath', 'Wexford', 'Wicklow'];
};
